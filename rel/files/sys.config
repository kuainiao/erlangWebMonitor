[
{sasl, [
	{sasl_error_logger, {file, "log/sasl-error.log"}},
		{errlog_type, error},
		{error_logger_mf_dir, "log/sasl"},      % Log directory
	{error_logger_mf_maxbytes, 10485760},   % 10 MB max file size
	{error_logger_mf_maxfiles, 5}           % 5 files max
]},

{lager, [
	{colored, true},
	{async_threshold, 1000},
	{error_logger_redirect, false},
	{crash_log, "log/manager_crash.log"},
	{handlers, [
		{lager_console_backend, info},
		{lager_file_backend, [
			{formatter_config, [time, " ", pid, " [",severity,"] ", message, "\n"]},
			{file, "log/manager_info.log"},
			{level, info},
			{size, 104857600},
			{date, "$D0"},
			{count, 30}
		]},
		{lager_file_backend, [
			{formatter_config, [time, " ", pid, " [",severity,"] ", message, "\n"]},
			{file, "log/manager_error.log"},
			{level, error},
			{size, 104857600},
			{date, "$D0"},
			{count, 30}
		]}
	]}
]},

{manager, [
	{ranch,  [{port, 8080}]},      
	{cowboy, [{nb_acceptors, 100}, {protocol, [{compress, true}]}]},
	{routes, 
                [ 
		{"/",             {priv_file, manager, "static/index.html"}},  
		{"/assets/[...]", {priv_dir, manager, "static/assets"}},
		{"/images/[...]", {priv_dir, manager, "static/images"}},
		{"/css/[...]",    {priv_dir, manager, "static/css"}},
		{"/js/[...]",     {priv_dir, manager, "static/js"}},
		{"/v1/:action",   {request, my_http_module, my_http_handler}},
		{"/v2/:action",   {request, my_http_proto_module, my_http_proto_handler, sm_protocol_payload}},
		{"/v1/ws",        {websocket, my_websocket_module, sm_protocol_bert}}
	]}
]}
].

